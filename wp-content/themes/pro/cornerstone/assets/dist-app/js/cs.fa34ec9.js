"use strict"
define("tco-app/adapters/cs-adapter-with-ids",["exports","tco-app/adapters/cs-adapter","uuid/v4"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=t.default.extend({generateIdForRecord:function(){return(0,n.default)()}})
e.default=o}),define("tco-app/adapters/cs-adapter",["exports","ember-data/adapters/json-api","tco-app/src/lib/http"],function(e,t,n){function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return(0,n.request)("adapter::".concat(e),Object.assign({action:"query",params:{}},t))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=t.default.extend({ui:Ember.inject.service(),preview:Ember.inject.service(),findAll:function(e,t){return o(t.modelName)},findRecord:function(e,t,n){return o(t.modelName,{params:{query:{id:n},single:!0}})},query:function(e,t,n){return o(t.modelName,{params:{query:n}})},shouldReloadRecord:function(){return!!this.get("ui.initialLoad")},shouldBackgroundReloadRecord:function(){return!!this.get("ui.initialLoad")},createRecord:function(e,t,n){return this._updateRequest("create",e,t,n)},updateRecord:function(e,t,n){return this._updateRequest("update",e,t,n)},deleteRecord:function(e,t,n){return this._updateRequest("delete",e,t,n)},_updateRequest:function(e,t,o,r){return(0,n.requestOne)("adapter::".concat(o.modelName),{action:e,params:{model:this.serialize(r,{includeId:!0}),id:r.id}})}})
e.default=r}),define("tco-app/adapters/cs-client-side-adapter",["exports","tco-app/adapters/cs-read-only-adapter","uuid/v4"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=t.default.extend({firstLoad:!1,generateIdForRecord:function(){return(0,n.default)()},shouldBackgroundReloadAll:function(){return!1},shouldReloadAll:function(e,t){return Ember.isEmpty(Ember.get(e.peekAll(t.type.modelName),"content"))},shouldReloadRecord:function(){return!1},shouldBackgroundReloadRecord:function(){return!1}})
e.default=o}),define("tco-app/adapters/cs-longevity-adapter",["exports","tco-app/adapters/cs-read-only-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.extend({csBackgroundReloadRefreshRate:3e5,shouldReloadRecord:function(){return!1},shouldBackgroundReloadRecord:function(e,t){var n=t.record.get("loadedAt"),o=Date.now()
return o-n>this.csBackgroundReloadRefreshRate&&(t.record.set("loadedAt",o),!0)}})
e.default=n}),define("tco-app/adapters/cs-option-list-adapter",["exports","ember-data/adapters/json-api","uuid/v4"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=t.default.extend({filterResponse:function(e,t,n){return n},option:null,generateIdForRecord:function(){return(0,n.default)()},findAll:function(e,t){var n=this
return new Ember.RSVP.Promise(function(o,r){e.findRecord("option",n.get("option")).then(function(r){o(n.filterResponse(e,t,r.serialize().data.attributes.value))},r)})},findRecord:function(e,t,n){var o=this
return new Ember.RSVP.Promise(function(r,a){o.findAll(e).then(function(){r(e.peekRecord(t.modelName,n))},a)})},query:function(){console.warn("This adapter does not support query")},shouldReloadRecord:function(){return!1},shouldBackgroundReloadRecord:function(){return!1},createRecord:function(e,t,n){return this._updateRequest("create",e,t,n)},updateRecord:function(e,t,n){return this._updateRequest("update",e,t,n)},deleteRecord:function(e,t,n){return this._updateRequest("delete",e,t,n)},_updateRequest:function(e,t,n){var o=this
return new Ember.RSVP.Promise(function(e,r){var a=t.peekRecord("option",o.get("option")),i=t.peekAll(n.modelName).filter(function(e){return!e.get("isDeleted")}).sortBy("order").map(function(e){return e.serialize({includeId:!0})})
a.set("value",i),a.save().then(function(){e()},r)})}})
e.default=o}),define("tco-app/adapters/cs-read-only-adapter",["exports","tco-app/adapters/cs-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.extend({createRecord:function(){return Ember.RSVP.resolve(void 0)},updateRecord:function(){return Ember.RSVP.resolve(void 0)},deleteRecord:function(){return Ember.RSVP.resolve(void 0)}})
e.default=n}),define("tco-app/app",["exports","ember-load-initializers","tco-app/mixins/link-to","tco-app/resolver","tco-app/src/boot"],function(e,t,n,o,r){function a(e,t,n,o,r,a,i){try{var s=e[a](i),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(o,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,Ember.$=window.jQuery
var i=Ember.Application.extend({podModulePrefix:"tco-app",modulePrefix:"tco-app",Resolver:o.default})
i.initializer({name:"global",initialize:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.deferReadiness(),e.next=3,(0,r.default)()
case 3:t.advanceReadiness(),t.inject("controller","debug","service:debug"),t.inject("component","debug","service:debug"),t.inject("route","debug","service:debug"),t.inject("controller","ui","service:ui"),t.inject("component","ui","service:ui"),t.inject("route","ui","service:ui"),t.inject("helper","config","service:config"),t.inject("route","config","service:config"),t.inject("service:controls","config","service:config"),t.inject("service:current-user","config","service:config"),t.inject("component","router","router:main"),t.inject("route","redux","service:redux"),t.inject("model","redux","service:redux"),t.inject("service:config","i18n","service:i18n"),t.inject("service:controls","i18n","service:i18n"),t.inject("route","i18n","service:i18n"),t.inject("component","i18n","service:i18n"),t.inject("model","i18n","service:i18n"),t.inject("controller","currentUser","service:current-user"),t.inject("component","currentUser","service:current-user"),t.inject("route","currentUser","service:current-user"),t.inject("controller:application","preview","service:preview"),Ember.LinkComponent.reopen(n.default)
case 27:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments
return new Promise(function(o,r){var i=e.apply(t,n)
function s(e){a(i,o,r,s,l,"next",e)}function l(e){a(i,o,r,s,l,"throw",e)}s(void 0)})})
return function(e){return t.apply(this,arguments)}}()}),i.instanceInitializer({name:"global",initialize:function(e){if(window.cornerstoneApp=e,e.lookup("service:redux"),window.csAppData.isPreview)e.lookup("service:preview").setup()
else{var t=Object.keys(window.csAppData.models),n=e.lookup("service:store")
"object"===Ember.typeOf(window.csAppData.models)&&t.forEach(function(e){return n.pushPayload(window.csAppData.models[e])})}}}),(0,t.default)(i,"tco-app"),Ember.Debug.registerWarnHandler(function(e,t,n){["ember-htmlbars.style-xss-warning"].includes(t.id)||n(e,t)}),Ember.Debug.registerDeprecationHandler(function(e,t,n){["events.inherited-function-listeners"].includes(t.id)||n(e,t)})
var s=i
e.default=s}),define("tco-app/application/adapter",["exports","tco-app/adapters/cs-read-only-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.extend({})
e.default=n}),define("tco-app/application/route",["exports","tco-app/mixins/preview-listener"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=window.wp,o=Ember.Route.extend(t.default,{ui:Ember.inject.service(),i18n:Ember.inject.service(),redux:Ember.inject.service(),preview:Ember.inject.service(),preference:Ember.inject.service(),fontManager:Ember.inject.service(),colorManager:Ember.inject.service(),router:Ember.inject.service(),headData:Ember.inject.service(),model:function(){var e=this
return window.csAppData.isPreview?Ember.RSVP.resolve({}):new Ember.RSVP.Promise(function(t,n){Ember.run.next(function(){e.store.peekRecord("option","cornerstone_color_items"),Ember.RSVP.hash({elementDefinitions:e.store.peekAll("element/definition"),preferences:e.store.peekRecord("preference",window.csAppData.current_user),colorItems:e.store.findAll("color-manager/selection"),fontItems:e.store.findAll("font-manager/selection"),fontConfig:e.store.peekRecord("option","cornerstone_font_config")}).then(function(e){return t(e)},n)})})},afterModel:function(e){window.csAppData.isPreview||(this.get("preference").setup(e.preferences),this.get("colorManager").setup(e.colorItems),this.get("fontManager").setup(e.fontItems,e.fontConfig))},init:function(){var e=this
this._super.apply(this,arguments),window.csAppData.isPreview||this.listenTo("preview:ui-event",function(t){"media:open"===t.action&&e.send("openMedia")})},updateTitle:function(){var e=[window.csAppData.env.title],t=this.getWithDefault("router.currentRouteName","").replace("template-manager.design-cloud","design-cloud")
if(t){var n=t.split(".")
if("index"!==n[0]){var o="options"===n[0]?this.get("i18n").t("common.title.options-".concat(window.csAppData.optionsTitle||"styling")):this.get("i18n").t("common.title.".concat(n[0]))
if(e.push(o),n[1]){var r={globalBlocksBuilder:function(e){return this.modelFor(e).content.get("title")},headersHeader:function(e){return this.modelFor(e).header.get("title")},contentBuilder:function(e){return this.modelFor(e).content.get("title")},footersFooter:function(e){return this.modelFor(e).footer.get("title")}}[Ember.String.camelize("".concat(n[0],"-").concat(n[1]))]
r&&e.push(r.apply(this,[t]))}}}this.set("headData.title",e.reverse().join(" - "))},actions:{openMedia:function(){var e=this
if(window.wp&&window.wp.media&&window.wp.media.editor){var t=window.wp.media({frame:"post",state:"insert",title:window.wp.media.view.l10n.addMedia,multiple:!0})
t.open()
var o=!1
t.on("close",function(){setTimeout(function(){o||e.get("preview.xfr").message("preview:remote-media",{close:!0}),o=!1},0)})
var r=function(t){return e.get("preview.xfr").message("preview:remote-media",{close:!0,html:t})}
t.on("insert",function(e){o=!0
var n=t.state()
e=e||n.get("selection"),Ember.$.when.apply(Ember.$,e.map(function(e){n.display(e).toJSON()
return this.send.attachment(n.display(e).toJSON(),e.toJSON())},window.wp.media.editor)).done(r)}),t.state("gallery-edit").on("update",function(e){r(n.media.gallery.shortcode(e).string())},this),t.state("playlist-edit").on("update",function(e){r(n.media.playlist.shortcode(e).string())},this),t.state("video-playlist-edit").on("update",function(e){r(n.media.playlist.shortcode(e).string())},this),t.state("embed").on("select",function(){var e=t.state(),o=e.get("type"),a=e.props.toJSON()
a.url=a.url||"","link"===o?(_.defaults(a,{linkText:a.url,linkUrl:a.url}),window.wp.media.editor.send.link(a).done(function(e){r(e)})):"image"===o&&(_.defaults(a,{title:a.url,linkUrl:"",align:"none",link:"none"}),"none"===a.link?a.linkUrl="":"file"===a.link&&(a.linkUrl=a.url),r(n.media.string.image(a)))})}else this.get("preview.xfr").message("preview:remote-media",{close:!0})},selectLanguage:function(e){this.transitionTo({queryParams:{lang:e}})},save:function(){},error:function(e,t){console.warn("Transition Error",e,t)},cancel:function(){if(!this.get("preview.isPreview")){var e=Ember.$('<input type="text" style="opacity:0;position:absolute;">')
Ember.$("body").append(e),e.focus(),e.remove()}},toggleOrientation:function(){this.get("ui").send("toggleOrientation")},loading:function(e){var t=this
this.set("ui.transitioning",!0),e.promise.finally(function(){return t.set("ui.transitioning",!1)})},didTransition:function(){var e=this
return Ember.run.next(this,function(){var t=e.get("router.currentRouteName")
e.set("ui.currentRouteName",t),e.updateTitle(),e.get("ui").removePreloader()}),!0},observerNav:function(e){var t=[e.route]
e.id&&t.push(e.id),this.transitionTo.apply(this,t)}}})
e.default=o}),define("tco-app/application/serializer",["exports","ember-data/serializers/json-api"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.extend({pushPayload:function(e,t){return e.push(this._normalizeDocumentHelper(t))}})
e.default=n}),define("tco-app/application/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"g4ChDs/8",block:'{"symbols":[],"statements":[[1,[21,"head-layout"],false],[0,"\\n"],[4,"unless",[[23,["preview","isPreview"]]],null,{"statements":[[4,"global/top-level",null,null,{"statements":[[4,"global/cs-bar",null,null,{"statements":[[1,[27,"outlet",["bar"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"global/settings-modal",null,null,{"statements":[[4,"if",[[23,["ui","preference","canManage"]]],null,{"statements":[[1,[21,"global/settings-modal/tab-preferences"],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"user-can",["colors"],null]],null,{"statements":[[1,[27,"global/settings-modal/tab-colors",null,[["items"],[[23,["model","colorItems"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[27,"user-can",["fonts"],null]],null,{"statements":[[1,[27,"global/settings-modal/tab-fonts",null,[["items","fontConfig"],[[23,["model","fontItems"]],[23,["model","fontConfig"]]]]],false],[0,"\\n"]],"parameters":[]},null],[1,[27,"outlet",["settings"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[1,[27,"outlet",["global"],null],false],[0,"\\n"],[1,[21,"global/notification-queue"],false],[0,"\\n\\n"],[1,[27,"common/confirm-modal",null,[["screen"],["global"]]],false],[0,"\\n"],[1,[21,"react-bridge"],false],[0,"\\n\\n"],[1,[21,"global/progress-bar"],false],[0,"\\n\\n"],[1,[21,"outlet"],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"\\n"],[4,"if",[[23,["preview","ready"]]],null,{"statements":[[0,"\\n"],[1,[21,"react-bridge/preview-manager"],false],[0,"\\n\\n"],[4,"unless",[[23,["preview","dragging"]]],null,{"statements":[[1,[27,"preview/cs-observer",null,[["eventNs","observeAttr","class"],["observer-nav","cs-observeable-nav","nav"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"eq",[[23,["preview","initialRoute"]],"content"],null]],null,{"statements":[[1,[27,"preview/preview-builder",null,[["regions","context"],[[27,"array",["content"],null],[27,"concat",["content.",[23,["preview","initialRouteConfig","post_type"]]],null]]]],false]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"eq",[[23,["preview","initialRoute"]],"header"],null]],null,{"statements":[[1,[27,"preview/preview-builder",null,[["regions"],[[27,"array",["top","left","bottom","right"],null]]]],false]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"eq",[[23,["preview","initialRoute"]],"footer"],null]],null,{"statements":[[1,[27,"preview/preview-builder",null,[["regions"],[[27,"array",["footer"],null]]]],false]],"parameters":[]},null],[0,"\\n"],[4,"if",[[27,"eq",[[23,["preview","initialRoute"]],"options"],null]],null,{"statements":[[1,[21,"preview/preview-options"],false]],"parameters":[]},null],[0,"\\n\\n"]],"parameters":[]},null],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"tco-app/application/template.hbs"}})
e.default=t}),define("tco-app/classic-template/adapter",["exports","tco-app/adapters/cs-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.extend({})
e.default=n}),define("tco-app/classic-template/model",["exports","ember-data/model","ember-data/attr"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=t.default.extend({title:(0,n.default)(),section:(0,n.default)(),type:(0,n.default)(),elements:(0,n.default)()})
e.default=o}),define("tco-app/color-manager/selection/adapter",["exports","tco-app/adapters/cs-option-list-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=t.default.extend({option:"cornerstone_color_items"})
e.default=n}),define("tco-app/color-manager/selection/model",["exports","ember-data","ember-data/attr"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=t.default.Model.extend({title:(0,n.default)(),value:(0,n.default)(),order:(0,n.default)(),label:Ember.computed.alias("title"),selectable:Ember.computed("isDeleted","title",function(){return!this.get("isDeleted")&&!!this.get("title")}),sortableTitle:Ember.computed("title","order",function(){return"".concat(this.get("order")," ").concat(this.get("title"))})})
e.default=o}),define("tco-app/color-manager/selection/serializer",["exports","ember-data/serializers/json-api","uuid/v4"],function(e,t,n){function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n)
"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{}
var n,o,r=function(e,t){if(null==e)return{}
var n,o,r={},a=Object.keys(e)
for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n])
return r}(e,t)
if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e)
for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=t.default.extend({normalizeResponse:function(e,t,r){var i=0
return{data:r.map(function(e){var r=e._id,s=a(e,["_id"])
return i+=1,{id:r||(0,n.default)(),type:t.modelName,attributes:o({order:i},s)}})}},serialize:function(){var e=this._super.apply(this,arguments)
return delete e.data.attributes.order,e.data.attributes._id=e.data.id,e.data.attributes}})
e.default=i}),define("tco-app/color-manager/service",["exports","color","tco-app/src/util/string"],function(e,t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var o=Ember.Service.extend({store:Ember.inject.service(),setup:function(e){this.set("items",e)},saved:0,activeItems:Ember.computed.filterBy("items","selectable",!0),paletteItems:Ember.computed.sort("activeItems","orderSort"),orderSort:["order"],change:Ember.computed("paletteItems.[]","paletteItems.@each.value",function(){return this.get("paletteItems").forEach(function(e){return e.get("value")}),null}),getPaletteItems:function(){return this.get("paletteItems").map(function(e){return{id:"global-color:".concat(e.get("id")),label:e.get("label"),value:e.get("value")}})},makeRandomColor:function(){return"#".concat(("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6))},lookupColor:function(e){var t=this
return(0,n.splitOnWhitespace)(e).map(function(e){return t.lookupSingleColor(e)}).join(" ")},lookupSingleColor:function(e){function n(n){try{(0,t.default)(n)}catch(o){return console.warn("Unable to resolve color: ".concat(e),o),"transparent"}return n}if("undefined"!==Ember.typeOf(e)&&e.includes&&e.includes("global-color:")){var o=e.replace("global-color:","")
this.get("change")
var r=this.get("paletteItems").find(function(e){return o===e.get("id")})
if(r)return n(r.get("value"))}return n(e)}})
e.default=o}),define("tco-app/components/click-outside",["exports","ember-click-outside/component"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("tco-app/components/common/confirm-modal/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({active:!1,classNames:["cs-action-modal-outer"],classNameBindings:["screenClass","active:cs-active"],screenClass:Ember.computed("screen",function(){return this.get("screen")?"cs-action-modal-".concat(Ember.String.dasherize(this.get("screen"))):""}),init:function(){this._super.apply(this,arguments)
var e=this.get("screen")
e||console.warn("Confirm modals need an assigned screen"),this.set("ui.confirmHandlers.".concat(e),this.confirm.bind(this))},confirm:function(e){var t=Object.assign({accept:null,acceptUrl:null,decline:null,message:"",class:"",acceptBtn:this.get("i18n").t("app.confirm-yep"),declineBtn:this.get("i18n").t("app.confirm-nope"),back:!1,backBtn:this.get("i18n").t("app.back"),backBtnClass:"",acceptClass:"",declineClass:""},e)
t.screen===this.get("screen")&&(t.back&&(t.declineBtn=t.backBtn,t.declineClass=t.backClass),this.setProperties({message:t.message,acceptCallback:t.accept,declineCallback:t.decline,showAcceptBtn:!(!t.accept&&!t.acceptUrl),acceptUrl:t.acceptUrl,acceptBtn:t.acceptBtn,declineBtn:t.declineBtn,acceptClass:t.acceptClass,declineClass:t.declineClass}),this.set("active",!0))},actions:{accept:function(){var e=this.get("acceptCallback")
"function"===Ember.typeOf(e)&&e(),this.set("active",!1)},decline:function(){var e=this.get("declineCallback")
"function"===Ember.typeOf(e)&&e(),this.set("active",!1)}}})
e.default=t}),define("tco-app/components/common/confirm-modal/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"AU4nh7/1",block:'{"symbols":["&default"],"statements":[[7,"div"],[11,"class","cs-action-modal-inner"],[9],[0,"\\n  "],[7,"div"],[11,"class","cs-action-modal-content"],[9],[0,"\\n    "],[7,"div"],[11,"class","cs-action-modal-message"],[9],[1,[21,"message"],true],[10],[0,"\\n    "],[7,"div"],[11,"class","cs-action-modal-actions"],[9],[0,"\\n"],[4,"if",[[24,1]],null,{"statements":[[0,"      "],[14,1],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["showAcceptBtn"]]],null,{"statements":[[4,"if",[[23,["acceptUrl"]]],null,{"statements":[[0,"      "],[7,"a"],[12,"class",[28,["cs-btn ",[21,"acceptClass"]]]],[12,"href",[21,"acceptUrl"]],[9],[1,[21,"acceptBtn"],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"button"],[12,"class",[28,["cs-btn ",[21,"acceptClass"]]]],[12,"onclick",[27,"action",[[22,0,[]],"accept"],null]],[9],[1,[21,"acceptBtn"],false],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null],[0,"\\n      "],[7,"button"],[12,"class",[28,["cs-btn ",[21,"declineClass"]]]],[12,"onclick",[27,"action",[[22,0,[]],"decline"],null]],[9],[1,[21,"declineBtn"],false],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"tco-app/components/common/confirm-modal/template.hbs"}})
e.default=t}),define("tco-app/components/common/control-list/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({classNames:["cs-controls"],actions:{searchNav:function(e){this.onSearchNavigate(e)}}})
e.default=t}),define("tco-app/components/common/control-list/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"tYtDqn41",block:'{"symbols":["control","&default"],"statements":[[0,"\\n"],[14,2],[0,"\\n"],[4,"each",[[23,["controls"]]],null,{"statements":[[4,"unless",[[27,"or",[[27,"contains",[[22,1,["id"]],[23,["hiddenControls"]]],null],[22,1,["isHidden"]],[22,1,["excluded"]]],null]],null,{"statements":[[1,[27,"component",[[27,"locate-component",[[27,"concat",["controls/control-",[22,1,["type"]]],null],"controls/control-base"],null]],[["control","hidden"],[[22,1,[]],[27,"or",[[27,"contains",[[22,1,["id"]],[23,["hiddenControls"]]],null],[22,1,["isHidden"]],[22,1,["excluded"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"tco-app/components/common/control-list/template.hbs"}})
e.default=t}),define("tco-app/components/common/create-translation/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({classNames:["cs-language-create"],languages:Ember.computed.alias("ui.wpmlLanguages"),targetLangData:Ember.computed("targetLang",function(){var e=this.get("targetLang")
return this.get("languages").find(function(t){return t.code===e})}),translationOptions:Ember.computed("model.language.translations",function(){var e=this.get("model.language.translations"),t=Ember.A()
return e&&this.getWithDefault("languages",[]).forEach(function(n){e[n.code]&&t.push({value:e[n.code],label:n.translated_name})}),t}),actions:{copyExisting:function(){this.send("create",!0)},startBlank:function(){this.send("create")},create:function(e){var t=this.get("model.language.source")
Ember.isNone(t)&&(t=this.get("model.id")),this.onCreateTranslation({source:t,copyFrom:!!e&&this.getWithDefault("selectedTranslation",this.get("translationOptions.firstObject.value")),lang:this.get("targetLang")})}}})
e.default=t}),define("tco-app/components/common/create-translation/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"6ZimpS3s",block:'{"symbols":[],"statements":[[7,"p"],[9],[1,[27,"t",["app.translation.create-message"],[["context","lang"],[[23,["contextLabel"]],[23,["targetLangData","translated_name"]]]]],false],[10],[0,"\\n\\n"],[7,"button"],[11,"class","cs-btn"],[12,"onclick",[27,"action",[[22,0,[]],"startBlank"],null]],[9],[1,[27,"t",["app.translation.start-blank"],null],false],[10],[0,"\\n\\n"],[7,"div"],[11,"class","cs-language-create-divider"],[9],[7,"span"],[9],[1,[27,"t",["app.translation.or"],null],false],[10],[10],[0,"\\n\\n"],[7,"div"],[11,"class","cs-language-create-control-group"],[9],[0,"\\n  "],[1,[27,"forms/styled-select",null,[["options","value"],[[23,["translationOptions"]],[23,["selectedTranslation"]]]]],false],[0,"\\n  "],[7,"button"],[11,"class","cs-btn"],[12,"onclick",[27,"action",[[22,0,[]],"copyExisting"],null]],[9],[1,[27,"t",["app.translation.copy-existing"],null],false],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"tco-app/components/common/create-translation/template.hbs"}})
e.default=t}),define("tco-app/components/common/cs-picker/component",["exports","tco-app/mixins/dragula-events"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=function(e,t){return e&&e.contains&&e&&e.contains(t)},o=Ember.Component.extend(t.default,{rootSelector:".cs-app",modalInPosition:!1,canOpen:!0,onStateChange:function(){},dragulaEvents:["element"],classNames:["cs-picker"],classNameBindings:["class","open:cs-active"],floatingSide:"right",scrollEvent:"ps-y-reach-start ps-scroll-y ps-y-reach-end ps-x-reach-start ps-scroll-x ps-x-reach-end",modalMode:"hide",delayComplete:!1,onDropIndex:function(){},onDrop:function(){},attrModalClass:Ember.computed("modalClass","inTabModal",function(){var e=["cs-picker-modal"],t=this.get("modalClass")
return t&&e.push(t),this.get("inTabModal")&&e.push("cs-picker-modal-from-tab-modal"),e.join(" ")}),canDisplayModal:Ember.computed("modalInPosition","modalMode","delayComplete",function(){return!("hide"!==this.get("modalMode")||!this.get("delayComplete"))||this.get("modalInPosition")}),onInit:Ember.on("init",function(){this.triggerExternalOpen()}),observeExternalOpen:Ember.observer("externalOpen",function(){this.triggerExternalOpen()}),triggerExternalOpen:function(){this.get("externalOpen")&&this.get("canOpen")&&this.set("open",!0)},didInsertElement:function(){var e=this
this.set("$modal",this.$(".cs-picker-modal")),this.set("hasRendered",!0),this.$().closest(".cs-tab-modal").length>0&&this.set("inTabModal",!0),this.updatePositioning(),Ember.run.later(function(){e.isDestroyed||e.set("delayComplete",!0)},25)},observeState:Ember.observer("open",function(){this.updatePositioning()}),updatePositioning:function(){var e=this
if(!this.isDestroyed)if(this.get("hasRendered")){var t=Ember.$("body"),o=Ember.$(window),r=o,a=this.$(".cs-picker-swatch"),i=this.$(),s=this.get("$modal"),l=function o(r){e.isDestroyed||i[0]!==r.currentTarget&&s[0]!==r.currentTarget&&!n(i[0],r.currentTarget)&&n(e.get("ui.topLevelEl"),r.currentTarget)&&!n(s[0],r.currentTarget)?(t.off("focus","*",o),t.off("click","*",o),!e.isDestroyed&&s[0]&&(e.set("open",!1),e.onStateChange(!1))):r.stopPropagation()},c=function t(){if(!e.isDestroyed){var n=a[0].getBoundingClientRect(),i=s[0].getBoundingClientRect(),l=n.top-i.height,c=o.height()-(n.top+i.height),u=n.left-i.width,p=o.width()-(n.right+i.width),d=!1,f=!0
l<0&&(f=c<0&&c<l),p<0&&(d=!(u<0)||u>p),s.removeClass("cs-picker-floating-left huebert-floating-right").addClass(d?"cs-picker-floating-left":"cs-picker-floating-right").css({top:f?n.bottom-i.height:n.top,left:d?n.left-i.width:n.right}),s.hasClass("cs-picker-floating")||(r.off(e.get("scrollEvent"),t),o.off("resize",t))}}
this.get("open")?(s.detach().appendTo(this.get("rootSelector")),s.css("visibility","hidden").addClass("cs-picker-floating"),s.removeAttr("style"),c(),r.on(this.get("scrollEvent"),c),o.on("resize",c),t.on("focus","*",l),t.on("click","*",l),this.set("modalInPosition",!0),this.get("focusSelector")&&s.find(this.get("focusSelector")).focus()):(s.removeClass("cs-picker-floating cs-picker-floating-left cs-picker-floating-right"),this.set("modalInPosition",!1),s.detach().appendTo(this.$()))}else this.set("modalInPosition",!1)},willDestroy:function(){this._super.apply(this,arguments)
var e=this.get("$modal")
e&&e.remove()},dragulaDrop:function(e,t,n,o,r){var a=Ember.$(r).index()-1
this.onDropIndex(this.get("itemIndex"),a),this.onDrop(this.get("item"),a)},actions:{toggle:function(){this.get("canOpen")&&(this.set("open",!this.get("open")),this.onStateChange(this.get("open")))}}})
e.default=o}),define("tco-app/components/common/cs-picker/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"vNaJ7eUE",block:'{"symbols":["&default"],"statements":[[7,"div"],[11,"class","cs-picker-swatch"],[11,"tabindex","-1"],[12,"onclick",[27,"action",[[22,0,[]],"toggle"],null]],[9],[0,"\\n"],[4,"if",[[23,["label"]]],null,{"statements":[[0,"    "],[7,"span"],[9],[1,[21,"label"],true],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[1,[21,"content"],true],[0,"\\n"],[4,"if",[[23,["contentComponent"]]],null,{"statements":[[0,"    "],[1,[27,"component",[[23,["contentComponent"]]],null],false],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n\\n"],[7,"div"],[12,"class",[21,"attrModalClass"]],[9],[0,"\\n"],[4,"if",[[23,["canDisplayModal"]]],null,{"statements":[[0,"    "],[14,1,[[27,"hash",null,[["open"],[[23,["open"]]]]]]],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"tco-app/components/common/cs-picker/template.hbs"}})
e.default=t}),define("tco-app/components/common/cs-popover/component",["exports","ember-click-outside/mixin"],function(e,t){var n
function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=Ember.Component.extend(t.default,(o(n={allowClickPropogation:!1,classNames:["cs-popover"],classNameBindings:["fixed:cs-popover-fixed","sideClass","flowClass","show:cs-active","transitioning:cs-transitioning"],sideClass:Ember.computed("side",function(){return"cs-popover-".concat(this.getWithDefault("side","bottom"))}),flowCorrection:!0,flow:!1,flowClass:Ember.computed("fixed","flowCorrection","flow",function(){var e=this.get("flow")
return this.get("fixed")&&this.get("flowCorrection")?"cs-popover-flow-".concat(e):""}),onMouseEnter:function(){},onMouseLeave:function(){},onScroll:function(){},onResize:function(){},init:function(){this._super.apply(this,arguments),this.set("onScroll",this.get("onScroll").bind(this)),this.set("onResize",this.get("onResize").bind(this))},mouseEnter:function(e){this.onMouseEnter(e,this)},mouseLeave:function(e){this.onMouseLeave(e,this)},click:function(e){this.get("allowClickPropogation")||e.stopPropagation()},listening:!1,clickOutside:function(){this.onOutsideClick()},toggleListeners:function(e){var t=this.get("listening")
!e&&t&&(Ember.run.cancel(this._cancelListener),this.removeClickOutsideListener(),this.set("listening",!1)),e&&!t&&(this._cancelListener=Ember.run.next(this,this.addClickOutsideListener),this.set("listening",!0))},activeObserver:Ember.observer("active",function(){var e=this,t=this.get("active")
this.toggleListeners(t),Ember.run.scheduleOnce("afterRender",function(){e.openOrClose(t)})})},"onResize",function(){this.updatePosition()}),o(n,"onScroll",function(){this.updatePosition()}),o(n,"didInsertElement",function(){if(Ember.$(window).on("resize",this.onResize),this.get("fixed")){var e=this.$().closest(".cs-scroll-box")
if(0!==e.length){var t=e[0]
this.set("closestScrollbox",t),t.addEventListener("ps-scroll-y",this.onScroll),t.addEventListener("ps-scroll-x",this.onScroll)}else{var n=this.$().closest(".cs-scroll-container")
0===n.length&&(n=Ember.$(window.document.body)),n.on("scroll",this.onScroll),this.set("closestScrollContainer",n)}this.set("parentElement",this.$().parent()[0]),this.$().appendTo(Ember.$(".cs-app"))}}),o(n,"willDestroyElement",function(){if(Ember.$(window).off("resize",this.onResize),this.get("fixed")){var e=this.get("closestScrollbox"),t=this.get("closestScrollContainer")
e&&(e.removeEventListener("ps-scroll-y",this.onScroll),e.removeEventListener("ps-scroll-x",this.onScroll)),t&&t.off("scroll",this.onScroll),this.get("element").remove()}this.toggleListeners(!1)}),o(n,"maybeFocusInput",function(){var e=this
this.get("focusInput")&&Ember.run.next(function(){Ember.run.scheduleOnce("afterRender",function(){e.isDestroyed||e.$("input").focus()})})}),o(n,"openOrClose",function(e){var t=this,n=this.$()
if(!this.get("fixed"))return this.set("show",e),void this.maybeFocusInput()
e?(this.get("transitioning")&&(this.set("transitioning",!1),n.attr("style",""),this.set("finishTransition",!1)),this.updatePosition(),this.set("show",!0),this.maybeFocusInput()):(this.set("transitioning",!0),this.set("show",!1),this.set("finishTransition",!0),n.one("transitionend",function(){t.get("finishTransition")&&t.set("transitioning",!1)}))}),o(n,"updatePosition",function(){if(!this.isDestroyed&&this.get("parentElement")&&(this.get("active")||this.get("show"))){var e,t=Ember.$(window),n=t.height(),o=t.width(),r=this.get("parentElement").getBoundingClientRect(),a=r.top,i=r.bottom,s=r.left,l=r.width,c=r.height,u=this.get("side")
switch(u){case"top":e={bottom:n-i+c+7+5,left:s}
break
case"left":e={top:a+c/2,right:o-s+7+5}
break
case"bottom":e={top:a+c+7+5,left:s}
break
case"right":e={top:a+c/2,left:s+l+7+5}}if(this.get("flowCorrection")){var p=this.get("element").getBoundingClientRect(),d=!1
if("left"===u||"right"===u){var f=p.height/2
e.top+f>n&&(e.top=a-p.height+30,d="end"),e.top-f<0&&(e.top=a-15,d="start")}this.set("flow",d)}this.$().css(e)}}),n))
e.default=r}),define("tco-app/components/common/cs-popover/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"7p5eGO2w",block:'{"symbols":["&default"],"statements":[[14,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"tco-app/components/common/cs-popover/template.hbs"}})
e.default=t}),define("tco-app/components/common/help-text/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({classNames:"cs-help-text"})
e.default=t}),define("tco-app/components/common/help-text/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"TVHyIbq5",block:'{"symbols":["&default"],"statements":[[7,"h4"],[9],[1,[21,"title"],false],[10],[0,"\\n"],[7,"p"],[9],[1,[21,"message"],false],[14,1],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"tco-app/components/common/help-text/template.hbs"}})
e.default=t})
define("tco-app/components/common/index-entry/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({classNames:["cs-index-entry"],classNameBindings:["selected:cs-active","isNew:cs-new","compact:is-compact"],canEdit:!0,click:function(e){Ember.$(e.target).is(".cs-index-entry-info-readonly-input-pre")||this.onClick()},actions:{titleUpdate:function(e){this.set("title",e),this.titleUpdate()}}})
e.default=t}),define("tco-app/components/common/index-entry/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"ckov3btT",block:'{"symbols":["&default"],"statements":[[7,"div"],[11,"class","cs-index-entry-info"],[9],[0,"\\n"],[4,"if",[[23,["meta"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","cs-index-entry-info-meta"],[9],[1,[21,"meta"],true],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["before"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","cs-index-entry-info-before"],[9],[1,[21,"before"],true],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[7,"h2"],[11,"class","cs-index-entry-info-title"],[9],[0,"\\n"],[4,"if",[[23,["canEdit"]]],null,{"statements":[[0,"      "],[1,[27,"forms/inline-edit",null,[["value","onDoneEditing"],[[23,["title"]],[27,"action",[[22,0,[]],"titleUpdate"],null]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"span"],[9],[1,[21,"title"],false],[10],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"],[4,"if",[[23,["after"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","cs-index-entry-info-after"],[9],[1,[21,"after"],true],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"],[7,"div"],[11,"class","cs-index-entry-actions"],[9],[0,"\\n  "],[14,1],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"tco-app/components/common/index-entry/template.hbs"}})
e.default=t}),define("tco-app/components/common/language-picker/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({tagName:"ul",classNames:["cs-language-picker"],classNameBindings:["top:cs-language-picker-top"],languages:Ember.computed.alias("ui.wpmlLanguages"),actions:{select:function(e,t){this.onSelectLanguage(e,t)}}})
e.default=t}),define("tco-app/components/common/language-picker/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"lP+ZCRGY",block:'{"symbols":["language"],"statements":[[4,"each",[[23,["languages"]]],null,{"statements":[[0,"  "],[7,"li"],[12,"class",[28,["cs-language-picker-item ",[27,"if",[[27,"eq",[[23,["activeLanguage"]],[22,1,["code"]]],null],"cs-active"],null]]]],[9],[0,"\\n    "],[7,"a"],[12,"onclick",[27,"action",[[22,0,[]],"select",[22,1,["code"]],[22,1,[]]],null]],[12,"data-native-title",[22,1,["native_name"]]],[9],[0,"\\n      "],[7,"img"],[12,"src",[28,[[22,1,["country_flag_url"]]]]],[9],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"tco-app/components/common/language-picker/template.hbs"}})
e.default=t}),define("tco-app/components/common/link-out/component",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.Component.extend({tagName:"a",classNameBindings:["class"],attributeBindings:["href"],output:Ember.computed("content",function(){return Ember.String.htmlSafe(this.get("content"))}),click:function(e){var t=this
this.get("ui.unsavedData")&&(e.preventDefault(),this.get("ui").confirm({noSkip:!0,message:this.get("i18n").t("app.unsaved-warning"),accept:function(){window.location=t.get("href")},acceptClass:"sad"}))}})
e.default=t}),define("tco-app/components/common/link-out/template",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=Ember.HTMLBars.template({id:"1uUeQf7R",block:'{"symbols":["&default"],"statements":[[4,"if",[[24,1]],null,{"statements":[[0,"  "],[14,1],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[1,[21,"output"],true],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"tco-app/components/common/link-out/template.hbs"}})
e.default=t}),define("tco-app/components/common/preview-frame/component",["exports","url-parse","ember-redux","tco-app/mixins/hover-state","tco-app/xfr/agent","tco-app/mixins/preview-listener","tco-app/src/util/url","tco-app/src/util/base64","tco-app/src/actions/ui"],function(e,t,n,o,r,a,i,s,l){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var c=Ember.Component.extend(a.default,r.default,o.default,{xfrOrigin:"app",config:Ember.inject.service(),redux:Ember.inject.service(),ui:Ember.inject.service(),debugLogging:Ember.computed.alias("debug.logging"),ready:!1,showAsLoading:!0,loadedOnce:!1,loadError:!1,allowPreviewSizer:!0,usePreloader:!0,canResize:!0,state:{},name:"generic",content:"default",shrink:!1,classNames:["cs-preview-frame"],classNameBindings:["shrink:cs-preview-frame-mini:cs-preview-frame-full","noPreviewPointer:cs-preview-frame-no-pointer"],noPreviewPointer:Ember.computed("disablePreviewPointer","shrink",function(){return this.get("disablePreviewPointer")||this.get("shrink")}),clientShowPreloader:!0,preLoaderComplete:Ember.computed("ready","clientShowPreloader",function(){return this.get("ready")&&!this.get("clientShowPreloader")}),previewSizeClass:Ember.computed("canResize","ui.previewSize",function(){if(this.get("canResize"))return"cs-preview-size-".concat(this.get("ui.previewSize"))}),showPreviewSizer:Ember.computed("shrink","allowPreviewSizer","ui.routeEnabledPreviewSizer",function(){return this.get("allowPreviewSizer")&&!this.get("shrink")&&this.get("ui.routeEnabledPreviewSizer")}),detectStateChange:Ember.observer("src","state.inc",function(){this.generateIframeDebounce()}),generateIframeDebounce:function(){Ember.run.debounce(this,this.generateIframe,215)},init:function(){var e=this
this._super.apply(this,arguments),this.componentListenTo("navigate",function(t){return e.navigate(t)}),this.componentListenTo("load-activity",this.maybeShowLoadError),this.componentListenTo("pre-loader-state",function(t){var n=t.show
n||Ember.run.cancel(e.waitForClientPreloader),e.set("clientShowPreloader",n)}),this.componentListenTo("preview:package:setup",function(t,n){e.set("canUpdatePackage",!0),n(e.getWithDefault("package",{}))}),this.componentListenTo("preview:event-propagation",function(t){var n=t.event
return e.synthesizeEvent(n)}),this.componentListenTo("preview:action-propagation",function(t){var n=t.action
return e.get("ui.primaryRoute").send(n)}),this.componentListenTo("preview:error-message",function(t){var n=t.key
console.log("preview-error.".concat(n)),e.get("ui").notify({type:"error",message:"i18n.app.preview-error.".concat(n),timeout:15e3,extendedTimeout:650})}),this.componentListenTo("observer",function(t){e[Ember.String.camelize("on-observer-".concat(t.type))](t)}),this.componentListenTo("observer-nav",function(t){e.onObserverNav(t)}),this.componentListenTo("remote-action",function(t){e.onRemoteAction(t)}),this.componentListenTo("suspend-drag",function(){e.get("redux").dispatch((0,l.uiUpdate)({suspendDrag:!0})),e.$(".cs-preview-frame-container").one("mouseleave",function(){e.get("redux").dispatch((0,l.uiUpdate)({suspendDrag:!1})),e.get("ui.preview.xfr").message("preview:resume-drag")})}),this.componentListenTo("stop-drag",function(){return e.get("redux").dispatch((0,l.uiUpdate)({suspendDrag:!1}))})
var t=function t(){document.removeEventListener("mouseup",t),Ember.run.next(function(){e.get("ui.preview.xfr").message("preview:drag-existing-end")})}
this.componentListenTo("drag-existing",function(){return document.addEventListener("mouseup",t)})},didInsertElement:function(){this.set("rendered",!0),this.generateIframeDebounce()},packageChange:Ember.observer("package",function(){this.get("canUpdatePackage")&&this.message("preview:package:update",this.getWithDefault("package",{}))}),generateIframe:function(){var e=this
if(this.get("rendered")&&!this.isDestroyed){this.set("showAsLoading",!0),this.set("ready",!1)
var t=function(t,n){e.set("loadError",!0),e.set("loadErrorMessage",t),e.set("ready",!0),"function"==typeof n&&n.call(e)}
this.requestHTML(Object.assign({},this.get("state"))).then(function(n){var o=n.html,r=n.state
if(!e.isDestroyed){var a=o.replace(new RegExp("\x3c!--(.|[\r\n])*?--\x3e","g"),"")
a.substr(-100).includes("</html>")||(console.warn("No closing </html> tag>",{html:a}),e.get("ui").notify(e.get("i18n").t("app.preview-error.loading.incomplete-html"),"error")),Ember.run.cancel(e.scheduledUpdate),e.scheduledUpdate=Ember.run.scheduleOnce("afterRender",function(){if(!e.isDestroyed)try{var n=(0,s.base64Encode)(JSON.stringify(e.getWithDefault("package",{}))),a='<script>window.csPreviewSession="'.concat(e.get("previewSession"),'"; window.csPreviewPackage = "').concat(n,'";<\/script>')
o=o.replace("</head>","".concat(a,"</head>"))
var i=Ember.$("<iframe />")
e.$(".cs-preview-frame-container").append(i)
var l=i[0].contentWindow
l.document.open(),l.document.write(o),l.document.close(),Ember.run.cancel(e.loadTimeout),e.loadTimeout=Ember.run.later(function(){e.isDestroyed||(e.get("ui").incrementProperty("previewDelayed"),console.warn("Preview timeout"),e.get("previewDelayed")>1?t("timeout",function(){return e.$("iframe").not(i).remove()}):(e.set("showAsLoading",!0),e.set("loadError",!1),e.set("ready",!1),e.generateIframeDebounce()))},15e3*(e.get("ui.previewDelayed")+1)),e.initFrame(i[0],r.timestamp,function(){e.$("iframe").not(i).remove(),Ember.run.cancel(e.loadTimeout),e.set("loadError",!1),e.set("loadErrorMessage",null),e.set("ready",!0),e.maybeShowLoadError()})}catch(c){console.log(c)}})}},function(e){console.warn("preview-frame::update-aborted",e),e&&!1===e.error||t(e&&e.message?e.message:null)})}},maybeShowLoadError:function(){var e=this
Ember.run.cancel(this.waitForClientPreloader),this.waitForClientPreloader=Ember.run.later(function(){!e.isDestroyed&&e.get("clientShowPreloader")&&e.get("usePreloader")&&(console.warn("The preview booted, but never requested the loader be removed.",e.get("ui.previewDelayed")),e.set("loadError",!0),e.set("loadErrorMessage","timeout"),e.get("ui").incrementProperty("previewDelayed"))},15e3*(this.get("ui.previewDelayed")+1))},requestHTML:function(e){var n=this
return new Ember.RSVP.Promise(function(o,r){var a=n.get("src"),l=(0,t.default)(a,!0)
if(window.location.protocol!==l.protocol&&window.location.host===l.host)return r({error:!0,message:"https-mismatch"})
if(!(0,i.sameOrigin)(a,window.location.origin))return r({error:!0,message:"cross-origin"})
var c="".concat(l.origin).concat(l.pathname)
"/"!==c.charAt(c.length-1)&&(c+="/")
var u=Date.now()
e.timestamp="t-".concat(u)
var p=Ember.assign({},{_cs_nonce:n.get("config.global._cs_nonce"),cs_preview_state:(0,s.base64Encode)(JSON.stringify(e))},n.getWithDefault("requestParams",{}),l.query)
n.get("debugLogging")&&console.log("Requesting iFrame HTML",c,p),Ember.$.ajax({type:"POST",url:c,data:p}).done(function(t,a,i){if(n.get("lastUpdate")>u)r({error:!1,message:"updated since request"})
else{n.get("lastUpdate",u)
var s=i.responseText
n.get("debugLogging")&&console.log("Receiving iFrame HTML",i)
var l=s.lastIndexOf("CORNERSTONE_FRAME")
if(-1===l||l<s.lastIndexOf("</html>"))r({error:!0,message:"incomplete",response:s})
else{var c=s.slice(0,l)+s.slice(l+"CORNERSTONE_FRAME".length)
o({html:c,state:e})}}}).fail(function(e){return r(e)})})},loadErrorMessageDisplay:Ember.computed("loadErrorMessage",function(){var e=this.get("loadErrorMessage")
return e||(e="default"),this.get("i18n").t("app.preview-error.load.".concat(e))}),originUrl:Ember.computed(function(){return window.location.origin}),initFrame:function(e,t,n){var o=this
this.closeChannel()
var r=new MessageChannel
r.port1.addEventListener("message",this.get("xfrOnMessage"),!1),r.port1.start(),this.set("messageChannel",r),this.set("xfrMessagePort",r.port1),this.getWithDefault("xfrUnsubscribe",function(){})(),this.set("xfrUnsubscribe",this.get("xfrSubscribe")(e)),this.set("boundiFrameLoaded",function(a){o.get("debugLogging")&&console.log("Preview frame [".concat(t,"] recieving message"),a),"cs-preview-port-request::".concat(t)===a.data&&(e.contentWindow.postMessage("cs-preview-port","*",[r.port2]),n())}),window.addEventListener("message",this.get("boundiFrameLoaded"),!1)},willDestroyElement:function(){this.closeChannel(),this.getWithDefault("xfrUnsubscribe",function(){})()},closeChannel:function(){window.removeEventListener("message",this.get("boundiFrameLoaded"),!1)
var e=this.get("messageChannel")
e&&(e.port1.removeEventListener("message",this.get("xfrOnMessage"),!1),e.port1.close())},synthesizeEvent:function(e){["mousedown","mouseup","click"].includes(e.type)?function(e,t){var n=Ember.assign({},t,{view:window,bubbles:!0,cancelable:!0})
delete n.type
var o=new MouseEvent(e,n)
window.dispatchEvent(o)}(e.type,e):["keydown","keypress","keyup"].includes(e.type)&&function(e,t){var n=Ember.assign({},t,{view:window,bubbles:!0,cancelable:!0})
delete n.type
var o=new KeyboardEvent(e,n)
o.synthesizedWhich=t.which,document.body.dispatchEvent(o)}(e.type,e)},actions:{closeLoader:function(){this.set("loadedOnce",!0),this.set("showAsLoading",!1)},reloadAfterTimeout:function(){this.set("showAsLoading",!0),this.set("loadError",!1),this.set("ready",!1),this.generateIframeDebounce()}}}),u=(0,n.connect)(function(){re